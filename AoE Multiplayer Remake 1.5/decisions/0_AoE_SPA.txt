political_decisions = {
    renovate_the_armada = {
        picture = armada
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = renovated_the_armada }
            exists = yes
        }
        allow = {
            money = 20000000
            steam_turbine_ships = 1
            advanced_naval_design = 1
        }
        effect = {
            set_country_flag = renovated_the_armada
            add_country_modifier = {
                name = renovated_armada
                duration = 1825
            }
        }
        ai_will_do = {
        factor = 1
        }
    }

    introduce_the_cadastre_tax_and_banks = {
        picture = cadastre
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = introduced_the_cadastre_tax }
            exists = yes
        }
        allow = {
            central_bank_money_bill_printing = 1
            money = 300000
        }
        effect = {
            set_country_flag = introduced_the_cadastre_tax
            add_country_modifier = {
                name = the_cadastre_tax_and_the_spanish_bank
                duration = -1
            }
            treasury = -300000
        }
        ai_will_do = {
        factor = 1
        }
    }

    royal_academy_of_the_fine_arts = {
        picture = academy
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = made_royal_academy }
            exists = yes
        }
        allow = {
            expressionism = 1
        }
        effect = {
            set_country_flag = made_royal_academy
            prestige = 20
			any_pop = {
				limit = {
					is_accepted_culture = yes
				}
				literacy = 0.05
			}
        }
        ai_will_do = {
        factor = 1
        }
    }

    bourbon_claims_on_italy = {
        picture = become_two_sicilies
        potential = {
            tag = SPC
            NOT = { has_country_flag = bourbon_claims_on_italy }
        }
        allow = {
            state_n_government = 1
            owns = 754
            owns = 762
        }
        effect = {
            add_accepted_culture = south_italian
            set_country_flag = bourbon_claims_on_italy
        }
    }
    expel_the_jesuits = {
        picture = jesuits
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = expeled_the_jesuits }
            exists = yes
        }
        allow = {
            trade_policy = protectionism
            NOT = {
                OR = {
                    wage_reform = no_minimum_wage
                    wage_reform = trinket_wage
                }
            }
            ruling_party_ideology = reactionary
        }
        effect = {
            set_country_flag = expeled_the_jesuits
            treasury = 100000
            country_event = 114309
            any_country = {
                limit = {
                    exists = yes
                    vassal_of = THIS
                    government = colonial_company
                }
                country_event = 114309
            }
            random_owned = {
                owner = {
                    limit = {
                        wage_reform = low_minimum_wage
                    }
                    social_reform = acceptable_minimum_wage
                }
            }
            random_owned = {
                owner = {
                    limit = {
                        wage_reform = acceptable_minimum_wage
                    }
                    social_reform = good_minimum_wage
                }
            }
            PAP = {
                relation = {
                    value = -150
                    who = THIS
                }
            }
        }
        ai_will_do = {
            factor = 1
        }
    }
    royal_spanish_academy = {
        picture = spanish_academy
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = made_royal_spanish_academy }
            exists = yes
        }
        allow = {
            army_nco_training = 1
            military_directionism = 1
        }
        effect = {
            set_country_flag = made_royal_spanish_academy
            add_country_modifier = {
                name = new_royal_spanish_academy
                duration = 1825
            }
        }
        ai_will_do = {
        factor = 1
        }
    }

    reforms_of_giullo_alberoni = {
        picture = giulio_alberoni
        potential = {
            primary_culture = spanish
            NOT = { has_country_flag = reforms_of_giullo_albertoni }
            OR = {
                has_global_flag = support_bourbon_heir_spa
                has_global_flag = support_habsburg_heir_spa
            }
            NOT = {
                owns = 387
                owns = 753
            }
        }
        allow = {
            war = no
            trade_policy = protectionism
            OR = {
                AND = {
                    war_exhaustion = 20
                    has_recently_lost_war = yes
                }
                war_exhaustion = 40
            }
        }
        effect = {
            war_exhaustion = -15
            any_pop = {
                militancy = -3
            }
            money = 500000
            any_pop = {
                limit = {
                    type = soldiers
                    culture = spanish
                }
                reduce_pop = 1.05
            }
            any_country = {
                limit = {
                    vassal_of = THIS
                }
                relation = {
                    who = THIS
                    value = -50
                }
            }
            set_country_flag = reforms_of_giullo_albertoni
        }
    }

    galicia_claim_leon = {
        picture = armada
        potential = {
            tag = GLC
            NOT = { has_country_flag = claimed_leon }
            exists = yes
        }
        allow = {
            OR = {
                is_vassal = no
                is_secondary_power = yes
            }
        }
        effect = {
            475 = {
                add_core = THIS
            }
            477 = {
                add_core = THIS
            }
            482 = {
                add_core = THIS
            }
            set_country_flag = claimed_leon
            add_accepted_culture = spanish
            badboy = 5
        }
        ai_will_do = {
            factor = 1
        }
    }

    nueva_planta_decrees = {
        picture = nueva_planta
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = nueva_planta_decrees }
            exists = yes
            ARN = {
                exists = yes
                ai = yes
            }
        }
        allow = {
            ARN = {
                vassal_of = THIS
            }
            ideological_thought = 1
            NOT = { safety_regulations = no_safety }
        }
        effect = {
            ARN = {
                all_core = {
                    add_core = THIS
                    remove_core = ARN
                }
            }
            inherit = ARN
            set_country_flag = nueva_planta_decrees
            prestige = 25
        }
        ai_will_do = {
            factor = 1
        }
    }

    aragonese_italy = {
        picture = merchant_navy
        potential = {
            tag  = ARN
            is_vassal = no
            NOT = { has_country_flag = aragon_sicily }
            owns = 503
            exists = yes
        }
        allow = {
            war = no
            is_vassal = no
        }
        effect = {
            SIC_754 = {
                add_core = THIS
            }
            SIC_753 = {
                add_core = THIS
            }
            SIC_763 = {
                add_core = THIS
            }
            SAR_765 = {
                add_core = THIS
            }
            set_country_flag = aragon_sicily
        }
        ai_will_do = {
            factor = 1
        }
    }
	
	reforms_of_charles_iii = {
		picture = charles_iii
		potential = {
			primary_culture = spanish
            NOT = { has_country_flag = centralised_spanish_empire }
		}
		allow = {
		    nationalism_n_imperialism = 1
            is_greater_power = yes
		}
		effect = {
			money = 100000
			years_of_research = 0.3
			any_pop = {
				limit = {
					OR = {
					culture = spanish
					culture = south_italian
					}
				}
				militancy = -4
			}
			random_owned = {
				limit = {
					owner = {
						exists = VOP
						VOP = {
							is_substate = yes
						}
					}
				}
				owner = {
					VOP = {
						release_vassal = VNG
						release_vassal = VLP
						all_core = {
							limit = {
								OR = {
									is_core = VNG
									is_core = VLP
								}
							}
							remove_core = VOP
						}
						remove_accepted_culture = north_andean
						remove_accepted_culture = platinean
					}
				}
			}
			random_owned = {
				limit = {
					owner = {
						exists = VNS
					}
				}
				owner = {
					VNS = {
						any_owned= {
							limit = {
								OR = {
									is_core = VNG
									is_core = GCO
								}
							}
							add_core = VNG
							remove_core = VNS
							secede_province = THIS
						}
					}
				}
			}
			random_owned = {
				limit = {
					owner = {
						any_owned_province = {
							is_core = VNG
						}
					}
				}
				owner = {
					limit = {
						any_owned_province = {
							is_core = VNG
						}
					}
					any_owned = {
						limit = {
							is_core = VNG
						}
						secede_province = VNG
					}
				}
			}
			random_owned = {
				limit = {
					owner = {
						BEL = {
							all_core = {
								owned_by = THIS
							}
						}
						owns = 754
						owns = 753
						SRD = {
							all_core = {
								owned_by = THIS
							}
						}
						SYC = {
							all_core = {
								owned_by = THIS
							}
						}
						517 = {
							owned_by = THIS
						}
					}
				}
					owner = {
						add_accepted_culture = flemish
						add_accepted_culture = wallonian
						add_accepted_culture = south_italian
						any_owned = {
						limit = {
							OR = {
								is_core = NAP
								is_core = SYC
								is_core = SRD
								is_core = LOM
								is_core = BEL
							}
						}
						add_core = THIS
					}
				}
			}
            political_reform = unitary
            set_country_flag = centralised_spanish_empire
		}
	}

    create_iberia = {
        potential = {
            is_culture_group = iberian
            NOT = { tag = SPC }
            487 = { is_core = SPA }
			NOT = { tag = UPB }
            NOT = {
                exists = IBR
                has_global_flag = created_iberia
            }
            exists = yes
        }

        allow = {
            war = no
            prestige = 50
            is_greater_power = yes
            nationalism_n_imperialism = 1
            SPA = {
                all_core = {
                    OR = {
                        owned_by = THIS
                        owner = {
                            in_sphere = THIS
                            war = no
                        }
                        owner = {
                            vassal_of = THIS
                            war = no
                        }
                    }
                }
            }
            POR = {
                all_core = {
                    OR = {
                        owned_by = THIS
                        owner = {
                            in_sphere = THIS
                            war = no
                        }
                        owner = {
                            vassal_of = THIS
                            war = no
                        }
                    }
                }
            }
            517 = {
                OR = {
                    owned_by = THIS
                    owner = { in_sphere = THIS }
                    owner = { vassal_of = THIS }
                }
            }
        }

        effect = {
            set_global_flag = created_iberia
            prestige = 10
            all_core = { add_core = IBR }
            SPA = {
                all_core = { add_core = IBR remove_core = SPA }
            }
            POR = {
                all_core = { add_core = IBR }
            }
            random_country = {
                limit = {
                    tag = PBZ
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = PBZ
                }
            }
            random_country = {
                limit = {
                    tag = VNS
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VNS
                }
            }
            random_country = {
                limit = {
                    tag = VNG
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VNG
                }
            }
            random_country = {
                limit = {
                    tag = VOP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VOP
                }
            }
            random_country = {
                limit = {
                    tag = FLO
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = FLO
                }
            }
            random_country = {
                limit = {
                    tag = VLP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VLP
                }
            }
            517 = { add_core = IBR }
            add_accepted_culture = portuguese
            add_accepted_culture = galician
            add_accepted_culture = spanish
            add_accepted_culture = catalan
            add_accepted_culture = aragonese
            add_accepted_culture = basque
            change_tag = IBR
            any_country = {
                limit = {
                    tag = SPA
                    exists = yes
                    ai = yes
                }
                THIS = { inherit = SPA }
            }
            random_country = {
                limit = {
                    tag = SPA
                    exists = yes
                    ai = no
                }
                country_event = 98650
            }
            random_country = {
                limit = {
                    tag = POR
                    exists = yes
                    ai = yes
                }
                THIS = { inherit = POR }
            }
            random_country = {
                limit = {
                    tag = POR
                    exists = yes
                    ai = no
                }
                country_event = 98650
            }
            random_country = {
                limit = {
                    tag = CAT
                    exists = yes
                    CAT = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = yes
                }
                THIS = { inherit = CAT }
            }
            random_country = {
                limit = {
                    tag = CAT
                    exists = yes
                    CAT = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = no
                }
                country_event = 98650
            }
            random_country = {
                limit = {
                    tag = BSQ
                    exists = yes
                    BSQ = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = yes
                }
                THIS = { inherit = BSQ }
            }
            random_country = {
                limit = {
                    tag = BSQ
                    exists = yes
                    BSQ = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = no
                }
                country_event = 98650
            }
            any_country = {
                limit = {
                    NOT = { is_culture_group = iberian }
                    in_sphere = THIS
                }
                any_owned = {
                    limit = { is_core = IBR }
                    secede_province = THIS
                }
            }
            any_pop = {
                limit = { is_culture_group = iberian }
                militancy = -4
            }
        }

        ai_will_do = {
            factor = 1
        }
    }

    enact_new_constitution_spc = {
        picture = 1812_constitution
        potential = {
            tag = SPC
            NOT = { has_country_flag = enacted_new_constitution_spc }
            exists = yes
        }

        allow = {
            war = no
            prestige = 50
            is_greater_power = yes
            government = hms_government
            OR = {
                ruling_party_ideology = liberal
                ruling_party_ideology = socialist
                ruling_party_ideology = communist
            }
            revolution_n_counterrevolution = 1
        }

        effect = {
            set_country_flag = enacted_new_constitution_spc
			add_accepted_culture = caribeno
            random_owned = {
                limit = {
                    OR = {
                        owner = { political_parties = underground_parties }
                        owner = { political_parties = harassment }
                    }
                }
                owner = {
                    political_reform = gerrymandering
                }
            }
            random_owned = {
                limit = {
                    owner = { NOT = { press_rights = free_press } }
                }
                owner = {
                    political_reform = free_press
                }
            }
            random_owned = {
                limit = {
                    OR = {
                        owner = { vote_franschise = none_voting }
                        owner = { vote_franschise = landed_voting }
                        owner = { vote_franschise = wealth_weighted_voting }
                    }
                }
                owner = {
                    political_reform = wealth_voting
                }
            }
            random_owned = {
                limit = {
                    owner = { NOT = { upper_house_composition = population_equal_weight } }
                }
                owner = {
                    political_reform = population_equal_weight
                }
            }
            FLO = {
                all_core = {
                    add_core = THIS
                    remove_core = VNS
                }
            }
            SPA_2209 = {
                add_core = THIS
            }
            add_core = 2216
            add_core = 2214
            add_core = 2222
            add_core = 2217
            random_country = {
                limit = {
                    tag = VNS
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VNS
                }
            }
            random_country = {
                limit = {
                    tag = VNG
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VNG
                }
            }
            random_country = {
                limit = {
                    tag = FLO
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = FLO
                }
            }
            random_country = {
                limit = {
                    tag = VOP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VOP
                }
            }
            random_country = {
                limit = {
                    tag = VLP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VLP
                }
            }
        }
    }
}
