political_decisions = {

    bourbon_claims_on_italy = {
        picture = become_two_sicilies
        potential = {
            tag = SPC
            NOT = { has_country_flag = bourbon_claims_on_italy }
        }
        allow = {
            state_n_government = 1
            owns = 754
            owns = 762
        }
        effect = {
            add_accepted_culture = south_italian
            set_country_flag = bourbon_claims_on_italy
        }
    }
    expel_the_jesuits = {
        picture = jesuits
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = expeled_the_jesuits }
            exists = yes
        }
        allow = {
            trade_policy = protectionism
            NOT = {
                OR = {
                    wage_reform = no_minimum_wage
                    wage_reform = trinket_wage
                }
            }
            ruling_party_ideology = reactionary
        }
        effect = {
            set_country_flag = expeled_the_jesuits
            treasury = 100000
            country_event = 114309
            any_country = {
                limit = {
                    exists = yes
                    vassal_of = THIS
                    government = colonial_company
                }
                country_event = 114309
            }
            random_owned = {
                owner = {
                    limit = {
                        wage_reform = low_minimum_wage
                    }
                    social_reform = acceptable_minimum_wage
                }
            }
            random_owned = {
                owner = {
                    limit = {
                        wage_reform = acceptable_minimum_wage
                    }
                    social_reform = good_minimum_wage
                }
            }
            PAP = {
                relation = {
                    value = -150
                    who = THIS
                }
            }
        }
        ai_will_do = {
            factor = 1
        }
    }

	spanish_military_reform = {	
		picture = spanish_academy
		potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = spanish_military_reform }
            exists = yes
        }
        allow = {
			war = no
			invention = goose_step
        }
        effect = {
            set_country_flag = spanish_military_reform
            random_owned = {
				limit = {
					owner = {
						pensions = low_pensions
					}
				}
				owner = {
					social_reform = acceptable_pensions
				}
			}
			random_owned = {
				limit = {
					owner = {
						pensions = trinket_pensions
					}
				}
				owner = {
					social_reform = low_pensions
				}
			}
			random_owned = {
				limit = {
					owner = {
						pensions = no_pensions
					}
				}
				owner = {
					social_reform = trinket_pensions
				}
			}
			add_country_modifier = {
                name = the_cadastre_tax_and_the_spanish_bank
                duration = -1
            }
        }
        ai_will_do = {
        factor = 1
        }
	}
    reforms_of_giullo_alberoni = {
        picture = giulio_alberoni
        potential = {
            primary_culture = spanish
            NOT = { has_country_flag = reforms_of_giullo_albertoni }
            OR = {
                has_global_flag = support_bourbon_heir_spa
                has_global_flag = support_habsburg_heir_spa
            }
            NOT = {
                owns = 387
                owns = 753
            }
        }
        allow = {
            war = no
            trade_policy = protectionism
            OR = {
                AND = {
                    war_exhaustion = 20
                    has_recently_lost_war = yes
                }
                war_exhaustion = 40
            }
        }
        effect = {
            war_exhaustion = -15
            any_pop = {
                militancy = -3
            }
            money = 500000
            any_pop = {
                limit = {
                    type = soldiers
                    culture = spanish
                }
                reduce_pop = 1.05
            }
            any_country = {
                limit = {
                    vassal_of = THIS
                }
                relation = {
                    who = THIS
                    value = -50
                }
            }
            set_country_flag = reforms_of_giullo_albertoni
        }
    }

    nueva_planta_decrees = {
        picture = nueva_planta
        potential = {
            OR = {
                tag = SPA
                tag = SPC
            }
            NOT = { has_country_flag = nueva_planta_decrees }
        }
        allow = {
            ideological_thought = 1
            NOT = { safety_regulations = no_safety }
			NOT = { safety_regulations = trinket_safety }
			NOT = { safety_regulations = low_safety }
        }
        effect = {
			add_country_modifier = {
				name = nueva_planta_decrees
				duration = 1825
			}
			upper_house = {
				ideology = reactionary
				value = 0.30
			}
			political_reform = appointed
            set_country_flag = nueva_planta_decrees
            prestige = 25
        }
        ai_will_do = {
            factor = 1
        }
    }

	reforms_of_charles_iii = {
		picture = charles_iii
		potential = {
			primary_culture = spanish
            NOT = { has_country_flag = centralised_spanish_empire }
		}
		allow = {
		    nationalism_n_imperialism = 1
            is_greater_power = yes
		}
		effect = {
			money = 100000
			years_of_research = 0.3
			any_pop = {
				limit = {
					OR = {
						culture = spanish
						culture = south_italian
					}
				}
				militancy = -4
			}
			random_owned = {
				limit = {
					owner = {
						BEL = {
							all_core = {
								owned_by = THIS
							}
						}
						owns = 754
						owns = 753
						SRD = {
							all_core = {
								owned_by = THIS
							}
						}
						SYC = {
							all_core = {
								owned_by = THIS
							}
						}
						517 = {
							owned_by = THIS
						}
					}
				}
					owner = {
						add_accepted_culture = flemish
						add_accepted_culture = wallonian
						add_accepted_culture = south_italian
						any_owned = {
						limit = {
							OR = {
								is_core = NAP
								is_core = SYC
								is_core = SRD
								is_core = LOM
								is_core = BEL
							}
						}
						add_core = THIS
					}
				}
			}
            set_country_flag = centralised_spanish_empire
		}
	}

    create_iberia = {
        potential = {
            is_culture_group = iberian
            NOT = { tag = SPC }
            487 = { is_core = SPA }
			NOT = { tag = UPB }
            NOT = {
                exists = IBR
                has_global_flag = created_iberia
            }
            exists = yes
        }

        allow = {
            war = no
            prestige = 50
            is_greater_power = yes
            nationalism_n_imperialism = 1
            SPA = {
                all_core = {
                    OR = {
                        owned_by = THIS
                        owner = {
                            in_sphere = THIS
                            war = no
                        }
                        owner = {
                            vassal_of = THIS
                            war = no
                        }
                    }
                }
            }
            POR = {
                all_core = {
                    OR = {
                        owned_by = THIS
                        owner = {
                            in_sphere = THIS
                            war = no
                        }
                        owner = {
                            vassal_of = THIS
                            war = no
                        }
                    }
                }
            }
            517 = {
                OR = {
                    owned_by = THIS
                    owner = { in_sphere = THIS }
                    owner = { vassal_of = THIS }
                }
            }
        }

        effect = {
            set_global_flag = created_iberia
            prestige = 10
            all_core = { add_core = IBR }
            SPA = {
                all_core = { add_core = IBR remove_core = SPA }
            }
            POR = {
                all_core = { add_core = IBR }
            }
            random_country = {
                limit = {
                    tag = PBZ
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = PBZ
                }
            }
            random_country = {
                limit = {
                    tag = VNS
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VNS
                }
            }
            random_country = {
                limit = {
                    tag = VNG
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VNG
                }
            }
            random_country = {
                limit = {
                    tag = VOP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VOP
                }
            }
            random_country = {
                limit = {
                    tag = FLO
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = FLO
                }
            }
            random_country = {
                limit = {
                    tag = VLP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    create_vassal = VLP
                }
            }
            517 = { add_core = IBR }
            add_accepted_culture = portuguese
            add_accepted_culture = galician
            add_accepted_culture = spanish
            add_accepted_culture = catalan
            add_accepted_culture = basque
            change_tag = IBR
            any_country = {
                limit = {
                    tag = SPA
                    exists = yes
                    ai = yes
                }
                THIS = { inherit = SPA }
            }
            random_country = {
                limit = {
                    tag = SPA
                    exists = yes
                    ai = no
                }
                country_event = 98650
            }
            random_country = {
                limit = {
                    tag = POR
                    exists = yes
                    ai = yes
                }
                THIS = { inherit = POR }
            }
            random_country = {
                limit = {
                    tag = POR
                    exists = yes
                    ai = no
                }
                country_event = 98650
            }
            random_country = {
                limit = {
                    tag = CAT
                    exists = yes
                    CAT = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = yes
                }
                THIS = { inherit = CAT }
            }
            random_country = {
                limit = {
                    tag = CAT
                    exists = yes
                    CAT = {
                        OR = {
                            vassal_of = THIS
                            is_vassal = no
                        }
                    }
                    ai = no
                }
                country_event = 98650
            }
            any_country = {
                limit = {
                    NOT = { is_culture_group = iberian }
                    in_sphere = THIS
                }
                any_owned = {
                    limit = { is_core = IBR }
                    secede_province = THIS
                }
            }
            any_pop = {
                limit = { is_culture_group = iberian }
                militancy = -4
            }
        }

        ai_will_do = {
            factor = 1
        }
    }

    enact_new_constitution_spc = {
        picture = 1812_constitution
        potential = {
            tag = SPC
            NOT = { has_country_flag = enacted_new_constitution_spc }
            exists = yes
        }

        allow = {
            war = no
            prestige = 50
            is_greater_power = yes
            government = hms_government
            OR = {
                ruling_party_ideology = liberal
                ruling_party_ideology = socialist
                ruling_party_ideology = communist
            }
            revolution_n_counterrevolution = 1
        }

        effect = {
            set_country_flag = enacted_new_constitution_spc
			add_accepted_culture = caribeno
			add_accepted_culture = mexican
			add_accepted_culture = central_american
			add_accepted_culture = north_andean
            random_owned = {
                limit = {
                    OR = {
                        owner = { political_parties = underground_parties }
                        owner = { political_parties = harassment }
                    }
                }
                owner = {
                    political_reform = gerrymandering
                }
            }
            random_owned = {
                limit = {
                    owner = { NOT = { press_rights = free_press } }
                }
                owner = {
                    political_reform = free_press
                }
            }
            random_owned = {
                limit = {
                    OR = {
                        owner = { vote_franschise = none_voting }
                        owner = { vote_franschise = landed_voting }
                        owner = { vote_franschise = wealth_weighted_voting }
                    }
                }
                owner = {
                    political_reform = wealth_voting
                }
            }
            random_owned = {
                limit = {
                    owner = { NOT = { upper_house_composition = population_equal_weight } }
                }
                owner = {
                    political_reform = population_equal_weight
                }
            }
            FLO = {
                all_core = {
                    add_core = THIS
                    remove_core = VNS
                }
            }
            SPA_2209 = {
                add_core = THIS
            }
            add_core = 2216
            add_core = 2214
            add_core = 2222
            add_core = 2217
            random_country = {
                limit = {
                    tag = VNS
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VNS
                }
            }
            random_country = {
                limit = {
                    tag = VNG
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VNG
                }
            }
            random_country = {
                limit = {
                    tag = FLO
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = FLO
                }
            }
            random_country = {
                limit = {
                    tag = VOP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VOP
                }
            }
            random_country = {
                limit = {
                    tag = VLP
                    exists = yes
                    #ai = yes
                    is_vassal = yes
                }
                THIS = {
                    inherit = VLP
                }
            }
        }
    }
}
